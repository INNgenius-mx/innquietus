(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const e of s.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&i(e)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{v(),y(),b(),E(),L(),A(),I(),T(),x()});function v(){const n=document.getElementById("themeToggle"),o=document.documentElement,c=localStorage.getItem("innquietus-theme")||"dark";o.setAttribute("data-theme",c),n.addEventListener("click",()=>{const t=o.getAttribute("data-theme")==="dark"?"light":"dark";o.setAttribute("data-theme",t),localStorage.setItem("innquietus-theme",t),n.style.transform="scale(0.8) rotate(180deg)",setTimeout(()=>{n.style.transform=""},300)})}function y(){const n=document.getElementById("xpBarFill");function o(){const c=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,t=i>0?c/i*100:0;n.style.width=`${Math.min(t,100)}%`}window.addEventListener("scroll",o,{passive:!0}),o()}function b(){const n=document.getElementById("navbar"),o=document.getElementById("hamburger"),c=document.getElementById("navLinks"),i=c.querySelectorAll(".navbar__link");function t(){window.scrollY>50?n.classList.add("scrolled"):n.classList.remove("scrolled"),s()}window.addEventListener("scroll",t,{passive:!0}),t(),o.addEventListener("click",()=>{o.classList.toggle("open"),c.classList.toggle("open")}),i.forEach(e=>{e.addEventListener("click",()=>{o.classList.remove("open"),c.classList.remove("open")})});function s(){const e=document.querySelectorAll("section[id]"),a=window.scrollY+150;e.forEach(r=>{const l=r.offsetTop,m=r.offsetHeight,u=r.getAttribute("id");a>=l&&a<l+m&&i.forEach(p=>{p.classList.remove("active"),p.getAttribute("data-section")===u&&p.classList.add("active")})})}}function E(){const n=document.querySelectorAll(".reveal-up, .reveal-left, .reveal-right");if(!n.length)return;const o=new IntersectionObserver(e=>{e.forEach((a,r)=>{a.isIntersecting&&(setTimeout(()=>{a.target.classList.add("revealed")},r*100),o.unobserve(a.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});n.forEach(e=>o.observe(e));const c=document.querySelectorAll(".servicio-block, .brujula__card"),i=new IntersectionObserver(e=>{e.forEach((a,r)=>{a.isIntersecting&&(setTimeout(()=>{a.target.style.opacity="1",a.target.style.transform="translateY(0)"},r*120),i.unobserve(a.target))})},{threshold:.1});c.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(40px)",e.style.transition="opacity 0.6s ease, transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)",i.observe(e)});const t=document.querySelectorAll(".builder__kit"),s=new IntersectionObserver(e=>{e.forEach(a=>{if(a.isIntersecting){const r=a.target,l=Array.from(t).indexOf(r);setTimeout(()=>{r.style.opacity="1",r.style.transform="translateX(0)"},l*150),s.unobserve(r)}})},{threshold:.1});t.forEach(e=>{e.style.opacity="0",e.style.transform="translateX(-30px)",e.style.transition="opacity 0.5s ease, transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",s.observe(e)})}function L(){const n=document.getElementById("carouselTrack"),o=document.getElementById("prevBtn"),c=document.getElementById("nextBtn"),i=document.getElementById("carouselDots");if(!n)return;const t=n.querySelectorAll(".testimonio-card"),s=t.length;let e=0,a;t.forEach((f,g)=>{const d=document.createElement("button");d.classList.add("carousel__dot"),g===0&&d.classList.add("active"),d.setAttribute("aria-label",`Testimonio ${g+1}`),d.addEventListener("click",()=>r(g)),i.appendChild(d)});function r(f){e=(f%s+s)%s,n.style.transform=`translateX(-${e*100}%)`,l(),u()}function l(){i.querySelectorAll(".carousel__dot").forEach((g,d)=>{g.classList.toggle("active",d===e)})}o.addEventListener("click",()=>r(e-1)),c.addEventListener("click",()=>r(e+1));function m(){a=setInterval(()=>r(e+1),5e3)}function u(){clearInterval(a),m()}m();let p=0,h=!1;n.addEventListener("touchstart",f=>{p=f.touches[0].clientX,h=!0},{passive:!0}),n.addEventListener("touchend",f=>{if(!h)return;h=!1;const g=f.changedTouches[0].clientX,d=p-g;Math.abs(d)>50&&(d>0?r(e+1):r(e-1))},{passive:!0}),n.addEventListener("mouseenter",()=>clearInterval(a)),n.addEventListener("mouseleave",m)}function A(){const n=document.querySelectorAll(".builder__kit"),o=document.querySelector(".builder__construction"),c=document.querySelector(".builder__sidebar-title"),i=document.querySelector(".builder__sidebar-desc");n.length&&n.forEach(t=>{t.addEventListener("click",()=>{const s=t.classList.contains("selected");if(n.forEach(e=>e.classList.remove("selected")),!s){t.classList.add("selected"),t.style.transform="translateX(8px) scale(1.02)",setTimeout(()=>{t.style.transform="translateX(6px)"},200);const e=t.getAttribute("data-title"),a=t.getAttribute("data-desc"),r=t.getAttribute("data-image");e&&c&&(c.innerText=e),a&&i&&(i.innerText=a),r&&o&&(o.style.opacity="0",o.style.transform="scale(0.95)",setTimeout(()=>{o.src=r,o.onload=()=>{o.style.opacity="1",o.style.transform="scale(1)"}},300))}})})}function I(){const n=document.getElementById("heroParticles");if(!n)return;const o=["#FF5A00","#C724F1","#F8D849","#FFFFFF"],c=20;for(let i=0;i<c;i++){const t=document.createElement("div");t.classList.add("particle");const s=Math.random()*6+2,e=o[Math.floor(Math.random()*o.length)],a=Math.random()*100,r=Math.random()*15+10,l=Math.random()*10;t.style.cssText=`
      width: ${s}px;
      height: ${s}px;
      background: ${e};
      left: ${a}%;
      bottom: -10px;
      animation-duration: ${r}s;
      animation-delay: ${l}s;
      opacity: ${Math.random()*.5+.1};
      box-shadow: 0 0 ${s*2}px ${e};
    `,n.appendChild(t)}}function T(){document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const c=document.querySelector(n.getAttribute("href"));c&&c.scrollIntoView({behavior:"smooth",block:"start"})})})}function x(){const n=document.getElementById("contactForm"),o=document.getElementById("formFeedback");n&&n.addEventListener("submit",async c=>{c.preventDefault();const t=n.querySelector('input[type="email"]').value;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){o.textContent="Por favor, ingresa un email válido.",o.className="form-feedback error";return}const e=n.querySelector('button[type="submit"]'),a=e.innerHTML;e.disabled=!0,e.innerHTML='<span class="btn__studs"></span>Enviando...';const r=new FormData(n),l=new URLSearchParams;for(const u of r)l.append(u[0],u[1]);l.append("emailAddress",n.querySelector("#email").value);const m="https://docs.google.com/forms/d/e/1FAIpQLScRXAmTZT36MZKUjegon5jzCbYTzFVKy-HRM6YDGffMasCZsA/formResponse";try{await fetch(m,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}),o.textContent="¡Jugada maestra enviada! Te contactaremos pronto.",o.className="form-feedback success",n.reset()}catch(u){console.error("Error al enviar:",u),o.textContent="Hubo un error en la conexión. Intenta de nuevo o usa WhatsApp.",o.className="form-feedback error"}finally{e.disabled=!1,e.innerHTML=a}})}
